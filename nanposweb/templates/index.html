{% extends 'site.html' %}
{% set food_icons = ['burger', 'cloud-meatball', 'candy-cane', 'ice-cream', 'pizza-slice'] %}
{% set drink_icons = ['mug-hot', 'whiskey-glass'] %}
{% set alc_icons = ['beer-mug-empty', 'martini-glass', 'wine-bottle'] %}

{% block infobar %}
    {% if current_user.is_authenticated %}
        <li class="nav-item">
            <span class="nav-link text-dark">User: {{ current_user.name }}</span>
        </li>
        <li class="nav-item">
            <span class="nav-link text-dark">Balance: {{ macro.render_currency(balance) }}</span>
        </li>
    {% endif %}
{% endblock %}

{% block content %}
    <form action="{{ url_for('main.index') }}" method="post">
        {{ form.csrf_token }}
        <div class="row row-cols-4 g-3">
            {% for product in products %}
                {% if product.visible or view_all %}
                <div class="d-grid">
                    <button type="submit" class="btn btn-outline-primary py-5 ps-5" name="product_id"
                            value="{{ product.id }}">
                        {% if product.is_food %}
                            {% set icon = (food_icons | random) %}
                        {% else %}
                            {% if product.has_alc %}
                                {% set icon = (alc_icons | random) %}
                            {% else %}
                                {% set icon = (drink_icons | random) %}
                            {% endif %}
                        {% endif %}
                        <i class="fa-solid fa-{{ icon }} fa-3x" style="float: left"></i>
                        {{ product.name }}<br>
                        {{ macro.render_currency(product.price) }}
                    </button>
                </div>
                {% endif %}
            {% endfor %}
        </div>
    </form>
{% endblock %}
